import{n as g,a8 as x,p as z,F as d,G as A,r as s,H as E,f as b,o as F,y as e,w as a,b as o,J as K,a5 as P,t as u,ak as h,a as _,K as q,L as C}from"../index54848.js";import{T as I,u as $,_ as U}from"./LazyDataTable.vue_vue_type_script_setup_true_lang54848.js";import{u as y}from"./usePercentageField54848.js";const j={class:"flex items-center justify-center"},Q=g({__name:"PartnersTable",setup(N){const n=x(),r=z({name:{value:"",matchMode:I.LIKE}}),{loadLazyData:m,isLoading:f,tableRows:c,onPage:p,onSort:T,onFilter:S}=$({rows:20},D),V=d(()=>n.allPartners),B=d(()=>n.totalPartners);async function D(v){await n.fetchAllPartners(v)}return A(()=>{m()}),(v,l)=>{const R=s("InputText"),i=s("Column"),L=s("Button"),M=E("tooltip");return F(),b(U,{"total-records":B.value,value:V.value,loading:e(f),rows:e(c),filters:r.value,"onUpdate:filters":l[0]||(l[0]=t=>r.value=t),onPage:e(p),onSort:e(T),onFilter:l[1]||(l[1]=()=>e(S)(r.value)),"empty-message":"Nessun partner trovato."},{default:a(()=>[o(i,{field:"name",header:"Nome",sortable:!0,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:a(({filterModel:t,filterCallback:k})=>[o(R,{type:"text",modelValue:t.value,"onUpdate:modelValue":w=>t.value=w,onKeydown:K(w=>k(),["enter"]),placeholder:"Filtra per nome"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),o(i,{field:"cqp_fee",header:"Fee CQP",sortable:!0},{body:a(({data:t})=>[P(u(e(y)(e(h)(t.cqp_fee)))+"% ",1)]),_:1}),o(i,{field:"cqs_fee",header:"Fee CQS",sortable:!0},{body:a(({data:t})=>[P(u(e(y)(e(h)(t.cqs_fee)))+"% ",1)]),_:1}),o(i,{class:"w-[50px]",alignFrozen:"right",frozen:""},{body:a(({data:t})=>[_("div",j,[q(o(L,{size:"small",type:"button",icon:"pi pi-arrow-right",text:"",rounded:"",as:"router-link",to:{name:e(C).PARTNER_DETAIL,params:{id:t.id}}},null,8,["to"]),[[M,"Dettaglio",void 0,{top:!0}]])])]),_:1})]),_:1},8,["total-records","value","loading","rows","filters","onPage","onSort"])}}}),G={class:"flex flex-row flex-wrap gap-2 justify-between"},W=g({__name:"PartnersView",setup(N){const n=x(),r=d(()=>n.totalPartners);return(m,f)=>{const c=s("Button"),p=s("Card");return F(),b(p,{class:"main-margin"},{title:a(()=>[_("div",G,[_("h2",null,u(r.value)+" "+u((r.value===1,"Partner")),1),o(c,{label:"Nuovo",icon:"pi pi-plus",class:"mr-2",as:"router-link",to:{name:e(C).PARTNER_NEW}},null,8,["to"])])]),content:a(()=>[o(Q)]),_:1})}}});export{W as default};
